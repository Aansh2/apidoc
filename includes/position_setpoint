<h1 id="position-setpoint">Position Setpoint</h1>

<blockquote>
<p>API definition</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>ROS-Service Name: /&lt;namespace&gt;/navigation/position_set
ROS-Service Type: core_api/PositionSet, below is its description

<span class="c">#Request : expects position setpoint via twist.twist.linear.x,linear.y,linear.z</span>
<span class="c">#Request : expects yaw setpoint via twist.twist.angular.z (send yaw_valid=true)</span>
geometry_msgs/TwistStamped twist
float32 tolerance
bool async
bool relative
bool yaw_valid
bool body_frame

<span class="c">#Response : success=true - (if async=false &amp;&amp; if setpoint reached before timeout = 30sec) || (if async=true)</span>
bool success
</code></pre><pre class="highlight cpp tab-cpp"><code><span class="n">Function</span> <span class="n">Definition</span><span class="o">:</span> <span class="kt">int</span> <span class="n">Navigation</span><span class="o">::</span><span class="n">position_set</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">,</span> <span class="kt">float</span> <span class="n">z</span><span class="p">,</span> <span class="kt">float</span> <span class="n">yaw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="kt">float</span> <span class="n">tolerance</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">relative</span><span class="o">=</span><span class="nb">false</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">async</span><span class="o">=</span><span class="nb">false</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">yaw_valid</span><span class="o">=</span><span class="nb">false</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">body_frame</span><span class="o">=</span><span class="nb">false</span><span class="p">)</span>
<span class="n">Arguments</span><span class="o">:</span>
    <span class="o">:</span><span class="n">param</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="o">:</span> <span class="n">Position</span> <span class="n">Setpoint</span> <span class="n">in</span> <span class="n">NED</span><span class="o">-</span><span class="n">Frame</span> <span class="p">(</span><span class="n">in</span> <span class="n">body</span><span class="o">-</span><span class="n">frame</span> <span class="k">if</span> <span class="n">body_frame</span><span class="o">=</span><span class="nb">true</span><span class="p">)</span>
    <span class="o">:</span><span class="n">param</span> <span class="n">yaw</span><span class="o">:</span> <span class="n">Yaw</span> <span class="n">Setpoint</span> <span class="n">in</span> <span class="n">radians</span>
    <span class="o">:</span><span class="n">param</span> <span class="n">yaw_valid</span><span class="o">:</span> <span class="n">Must</span> <span class="n">be</span> <span class="n">set</span> <span class="n">to</span> <span class="nb">true</span><span class="p">,</span> <span class="k">if</span> <span class="n">yaw</span> <span class="n">setpoint</span> <span class="n">is</span> <span class="n">provided</span>
    <span class="o">:</span><span class="n">param</span> <span class="n">tolerance</span><span class="o">:</span> <span class="n">Acceptance</span> <span class="n">radius</span> <span class="n">in</span> <span class="n">meters</span><span class="p">,</span> <span class="k">default</span> <span class="n">value</span><span class="o">=</span><span class="mf">1.0</span><span class="n">m</span>
    <span class="o">:</span><span class="n">param</span> <span class="n">relative</span><span class="o">:</span> <span class="n">If</span> <span class="nb">true</span><span class="p">,</span> <span class="n">position</span> <span class="n">setpoints</span> <span class="n">relative</span> <span class="n">to</span> <span class="n">current</span> <span class="n">position</span> <span class="n">is</span> <span class="n">sent</span>
    <span class="o">:</span><span class="n">param</span> <span class="n">async</span><span class="o">:</span> <span class="n">If</span> <span class="nb">true</span><span class="p">,</span> <span class="n">asynchronous</span> <span class="n">mode</span> <span class="n">is</span> <span class="n">set</span>
    <span class="o">:</span><span class="n">param</span> <span class="n">body_frame</span><span class="o">:</span> <span class="n">If</span> <span class="nb">true</span><span class="p">,</span> <span class="n">position</span> <span class="n">setpoints</span> <span class="n">are</span> <span class="n">relative</span> <span class="n">with</span> <span class="n">respect</span> <span class="n">to</span> <span class="n">body</span> <span class="n">frame</span>
    <span class="o">:</span><span class="k">return</span><span class="o">:</span> <span class="n">For</span> <span class="n">async</span><span class="o">=</span><span class="nb">true</span><span class="p">,</span> <span class="n">returns</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">the</span> <span class="n">command</span> <span class="n">is</span> <span class="n">successfully</span> <span class="n">sent</span> <span class="n">to</span> <span class="n">the</span> <span class="n">vehicle</span><span class="p">,</span> <span class="k">else</span> <span class="n">returns</span> <span class="mf">1.</span> <span class="n">For</span> <span class="n">async</span><span class="o">=</span><span class="nb">false</span><span class="p">,</span> <span class="n">returns</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">the</span> <span class="n">vehicle</span> <span class="n">reaches</span> <span class="n">given</span> <span class="n">setpoint</span> <span class="n">before</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span><span class="n">secs</span><span class="p">,</span> <span class="k">else</span> <span class="n">returns</span> <span class="mf">1.</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">Class</span><span class="p">:</span> <span class="n">flyt_python</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">navigation</span>
<span class="n">Function</span><span class="p">:</span> <span class="n">position_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">yaw</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">async</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">yaw_valid</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">body_frame</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
<span class="n">Arguments</span><span class="p">:</span> 
    <span class="p">:</span><span class="nb">float</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">:</span> <span class="n">Position</span> <span class="n">Setpoint</span> <span class="ow">in</span> <span class="n">NED</span><span class="o">-</span><span class="n">Frame</span> <span class="p">(</span><span class="ow">in</span> <span class="n">body</span><span class="o">-</span><span class="n">frame</span> <span class="k">if</span> <span class="n">body_frame</span><span class="o">=</span><span class="n">true</span><span class="p">)</span>
    <span class="p">:</span><span class="nb">float</span> <span class="n">yaw</span><span class="p">:</span> <span class="n">Yaw</span> <span class="n">Setpoint</span> <span class="ow">in</span> <span class="n">radians</span>
    <span class="p">:</span><span class="nb">bool</span> <span class="n">yaw_valid</span><span class="p">:</span> <span class="n">Must</span> <span class="n">be</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">true</span><span class="p">,</span> <span class="k">if</span> <span class="n">yaw</span> <span class="n">setpoint</span> <span class="ow">is</span> <span class="n">provided</span>
    <span class="p">:</span><span class="nb">float</span> <span class="n">tolerance</span><span class="p">:</span> <span class="n">Acceptance</span> <span class="n">radius</span> <span class="ow">in</span> <span class="n">meters</span><span class="p">,</span> <span class="n">default</span> <span class="n">value</span><span class="o">=</span><span class="mf">1.0</span><span class="n">m</span>
    <span class="p">:</span><span class="nb">bool</span> <span class="n">relative</span><span class="p">:</span> <span class="n">If</span> <span class="n">true</span><span class="p">,</span> <span class="n">position</span> <span class="n">setpoints</span> <span class="n">relative</span> <span class="n">to</span> <span class="n">current</span> <span class="n">position</span> <span class="ow">is</span> <span class="n">sent</span>
    <span class="p">:</span><span class="nb">bool</span> <span class="n">async</span><span class="p">:</span> <span class="n">If</span> <span class="n">true</span><span class="p">,</span> <span class="n">asynchronous</span> <span class="n">mode</span> <span class="ow">is</span> <span class="nb">set</span>
    <span class="p">:</span><span class="nb">bool</span> <span class="n">body_frame</span><span class="p">:</span> <span class="n">If</span> <span class="n">true</span><span class="p">,</span> <span class="n">position</span> <span class="n">setpoints</span> <span class="n">are</span> <span class="n">relative</span> <span class="k">with</span> <span class="n">respect</span> <span class="n">to</span> <span class="n">body</span> <span class="n">frame</span>
<span class="n">Response</span><span class="p">:</span> 
    <span class="p">:</span><span class="nb">bool</span> <span class="n">success</span>
</code></pre><pre class="highlight cpp tab-cpp--ros"><code><span class="nl">Type:</span> <span class="n">Ros</span> <span class="n">Service</span>
<span class="n">Name</span><span class="o">:</span> <span class="o">/&lt;</span><span class="k">namespace</span><span class="o">&gt;/</span><span class="n">navigation</span><span class="o">/</span><span class="n">position_set</span><span class="p">()</span>
<span class="n">call</span> <span class="n">srv</span><span class="o">:</span>
    <span class="o">:</span><span class="n">geometry_msgs</span><span class="o">/</span><span class="n">TwistStamped</span> <span class="n">twist</span>
    <span class="o">:</span><span class="n">float32</span> <span class="n">tolerance</span>
    <span class="o">:</span><span class="kt">bool</span> <span class="n">async</span>
    <span class="o">:</span><span class="kt">bool</span> <span class="n">relative</span>
    <span class="o">:</span><span class="kt">bool</span> <span class="n">yaw_valid</span>
    <span class="o">:</span><span class="kt">bool</span> <span class="n">body_frame</span>
<span class="n">response</span> <span class="n">srv</span><span class="o">:</span> <span class="kt">bool</span> <span class="n">success</span>
</code></pre><pre class="highlight python tab-python--ros"><code><span class="n">Type</span><span class="p">:</span> <span class="n">Ros</span> <span class="n">Service</span>
<span class="n">Name</span><span class="p">:</span> <span class="o">/&lt;</span><span class="n">namespace</span><span class="o">&gt;/</span><span class="n">navigation</span><span class="o">/</span><span class="n">position_set</span><span class="p">()</span>
<span class="n">call</span> <span class="n">srv</span><span class="p">:</span>
    <span class="p">:</span><span class="n">geometry_msgs</span><span class="o">/</span><span class="n">TwistStamped</span> <span class="n">twist</span>
    <span class="p">:</span><span class="n">float32</span> <span class="n">tolerance</span>
    <span class="p">:</span><span class="nb">bool</span> <span class="n">async</span>
    <span class="p">:</span><span class="nb">bool</span> <span class="n">relative</span>
    <span class="p">:</span><span class="nb">bool</span> <span class="n">yaw_valid</span>
    <span class="p">:</span><span class="nb">bool</span> <span class="n">body_frame</span>
<span class="n">response</span> <span class="n">srv</span><span class="p">:</span> <span class="nb">bool</span> <span class="n">success</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">URL</span><span class="p">:</span> <span class="s1">'http://&lt;ip&gt;/ros/&lt;namespace&gt;/navigation/position_set'</span>

<span class="nx">JSON</span> <span class="nx">Request</span><span class="p">:</span>
<span class="p">{</span>
    <span class="nl">twist</span><span class="p">:{</span>
        <span class="nl">twist</span><span class="p">:{</span>
            <span class="nl">linear</span><span class="p">:{</span>
                <span class="nl">x</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
                <span class="nx">y</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
                <span class="nx">z</span><span class="p">:</span> <span class="nx">Float</span>
            <span class="p">},</span>
            <span class="nx">angular</span><span class="p">:{</span>
                <span class="nl">z</span><span class="p">:</span> <span class="nx">Float</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">tolerance</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
    <span class="nx">async</span><span class="p">:</span> <span class="nb">Boolean</span><span class="p">,</span>
    <span class="nx">relative</span><span class="p">:</span> <span class="nb">Boolean</span><span class="p">,</span>
    <span class="nx">yaw_valid</span> <span class="p">:</span> <span class="nb">Boolean</span><span class="p">,</span>
    <span class="nx">body_frame</span> <span class="p">:</span> <span class="nb">Boolean</span>
<span class="p">}</span>

<span class="nx">JSON</span> <span class="nx">Response</span><span class="p">:</span>
<span class="p">{</span>
    <span class="nl">success</span><span class="p">:</span> <span class="nb">Boolean</span><span class="p">,</span>
<span class="p">}</span>

</code></pre><pre class="highlight java tab-java"><code>
</code></pre>
<blockquote>
<p>Example API call</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>rosservice call /&lt;namespace&gt;/navigation/position_set <span class="s2">"twist:
  header:
    seq: 0
    stamp: {secs: 0, nsecs: 0}
    frame_id: ''
  twist:
    linear: {x: 1.0, y: 3.5, z: -5.0}
    angular: {x: 0.0, y: 0.0, z: 0.5}
tolerance: 0.0
async: false
relative: false
yaw_valid: true
body_frame: false"</span>

<span class="c">#sends (x,y,z)=(1.0,3.5,-5.0)(m), yaw=0.12rad, relative=false, async=false, yaw_valid=true, body_frame=false</span>
<span class="c">#default value of tolerance=1.0m if left at 0    </span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">flyt_python</span> <span class="kn">import</span> <span class="n">api</span>
<span class="n">drone</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">navigation</span><span class="p">()</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span>

<span class="n">drone</span><span class="o">.</span><span class="n">position_set</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

</code></pre><pre class="highlight cpp tab-cpp--ros"><code>

</code></pre><pre class="highlight python tab-python--ros"><code>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span>  <span class="nx">msgdata</span><span class="o">=</span><span class="p">{};</span>
<span class="nx">msgdata</span><span class="p">[</span><span class="s2">"twist"</span><span class="p">]</span><span class="o">=</span><span class="p">{};</span>
<span class="nx">msgdata</span><span class="p">.</span><span class="nx">twist</span><span class="p">[</span><span class="s2">"twist"</span><span class="p">]</span><span class="o">=</span><span class="p">{};</span>
<span class="nx">masdata</span><span class="p">.</span><span class="nx">twist</span><span class="p">.</span><span class="nx">twist</span><span class="p">[</span><span class="s2">"linear"</span><span class="p">]</span><span class="o">=</span><span class="p">{};</span>
<span class="nx">msgdata</span><span class="p">.</span><span class="nx">twist</span><span class="p">.</span><span class="nx">twist</span><span class="p">.</span><span class="nx">linear</span><span class="p">[</span><span class="s2">"x"</span><span class="p">]</span><span class="o">=</span><span class="mf">2.00</span><span class="p">;</span>
<span class="nx">msgdata</span><span class="p">.</span><span class="nx">twist</span><span class="p">.</span><span class="nx">twist</span><span class="p">.</span><span class="nx">linear</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]</span><span class="o">=</span><span class="mf">3.00</span><span class="p">;</span>
<span class="nx">msgdata</span><span class="p">.</span><span class="nx">twist</span><span class="p">.</span><span class="nx">twist</span><span class="p">.</span><span class="nx">linear</span><span class="p">[</span><span class="s2">"z"</span><span class="p">]</span><span class="o">=-</span><span class="mf">1.00</span><span class="p">;</span>
<span class="nx">msgdata</span><span class="p">.</span><span class="nx">twist</span><span class="p">.</span><span class="nx">twist</span><span class="p">[</span><span class="s2">"angular"</span><span class="p">]</span><span class="o">=</span><span class="p">{};</span>
<span class="nx">msgdata</span><span class="p">.</span><span class="nx">twist</span><span class="p">.</span><span class="nx">twist</span><span class="p">.</span><span class="nx">angular</span><span class="p">[</span><span class="s2">"z"</span><span class="p">]</span><span class="o">=</span><span class="mf">1.00</span><span class="p">;</span>
<span class="nx">msgdata</span><span class="p">[</span><span class="s2">"tolerance"</span><span class="p">]</span><span class="o">=</span><span class="mf">2.00</span><span class="p">;</span>
<span class="nx">msgdata</span><span class="p">[</span><span class="s2">"async"</span><span class="p">]</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span>
<span class="nx">msgdata</span><span class="p">[</span><span class="s2">"relative"</span><span class="p">]</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span>
<span class="nx">msgdata</span><span class="p">[</span><span class="s2">"yaw_valid"</span><span class="p">]</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span>
<span class="nx">msgdata</span><span class="p">[</span><span class="s2">"body_frame"</span><span class="p">]</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s2">"json"</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msgdata</span><span class="p">),</span>
    <span class="na">url</span><span class="p">:</span> <span class="s2">"http://&lt;ip&gt;/ros/&lt;namespace&gt;/navigation/position_set"</span><span class="p">,</span>  
    <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
           <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

</code></pre><pre class="highlight java tab-java"><code>
</code></pre>
<blockquote>
<p>Example API Response</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>success: <span class="nb">true</span>
</code></pre><pre class="highlight python tab-python"><code><span class="bp">True</span>
</code></pre><pre class="highlight cpp tab-cpp--ros"><code>
</code></pre><pre class="highlight python tab-python--ros"><code><span class="n">Success</span><span class="p">:</span> <span class="bp">True</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
    <span class="nl">success</span><span class="p">:</span><span class="nx">True</span>
<span class="p">}</span>

</code></pre><pre class="highlight java tab-java"><code>
</code></pre>
<p>This API sends position setpoint command to the autopilot. Additionally, you can send yaw setpoint (yaw_valid flag must be set true) to the vehicle as well. Some abstract features have been added, such as tolerance/acceptance-radius, synchronous/asynchronous mode, sending setpoints relative to current position (relative flag must be set true), sending setpoints relative to current body frame (body_frame flag must be set true).
This command commands the vehicle to go to a specified location and hover. It overrides any previous mission being carried out and starts hovering.</p>

<p><code class="prettyprint">POST http://&lt;ip&gt;/ros/&lt;namespace&gt;/navigation/position_set</code></p>
