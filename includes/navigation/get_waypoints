<h2 id="get-waypoints">Get Waypoints</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># API call described below requires shell access, either login to the device by connecting a monitor or use ssh for remote login.</span>

ROS-Service Name: /&lt;namespace&gt;/navigation/waypoint_get
ROS-Service Type: core_api/WaypointGet, below is its description

<span class="c"># Request: NULL</span>

<span class="c"># Returns success status and received count</span>
bool success
string message
uint32 wp_received
mavros_msgs/Waypoint[] waypoints

</code></pre><pre class="highlight cpp tab-cpp"><code><span class="c1">// C++ API described below can be used in onboard scripts only. For remote scripts you can use http client libraries to call FlytOS REST endpoints from C++.
</span>
<span class="n">Function</span> <span class="n">Definition</span><span class="o">:</span> <span class="kt">int</span> <span class="n">Navigation</span><span class="o">::</span><span class="n">waypoint_get</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">mavros_msgs</span><span class="o">::</span><span class="n">Waypoint</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">waypoints</span><span class="p">)</span>

<span class="n">Arguments</span><span class="o">:</span>  <span class="n">waypoints</span><span class="o">:</span> <span class="n">list</span> <span class="n">of</span> <span class="n">waypoints</span> <span class="n">will</span> <span class="n">be</span> <span class="n">made</span> <span class="n">available</span> <span class="n">in</span> <span class="k">this</span> <span class="n">variable</span>

<span class="n">Returns</span><span class="o">:</span>    <span class="n">returns</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">the</span> <span class="n">command</span> <span class="n">is</span> <span class="n">successfully</span> <span class="n">sent</span> <span class="n">to</span> <span class="n">the</span> <span class="n">vehicle</span>
</code></pre><pre class="highlight python tab-python"><code><span class="c"># Python API described below can be used in onboard scripts only. For remote scripts you can use http client libraries to call FlytOS REST endpoints from Python.</span>
<span class="n">Class</span><span class="p">:</span> <span class="n">flyt_python</span><span class="o">.</span><span class="n">API</span><span class="o">.</span><span class="n">navigation</span>

<span class="n">Function</span><span class="p">:</span> <span class="n">waypoint_get</span><span class="p">()</span>
</code></pre><pre class="highlight cpp tab-cpp--ros"><code><span class="c1">// ROS services and topics are accessible from onboard scripts only.
</span>
<span class="n">Type</span><span class="o">:</span> <span class="n">Ros</span> <span class="n">Service</span>
<span class="n">Name</span><span class="o">:</span> <span class="o">/&lt;</span><span class="k">namespace</span><span class="o">&gt;/</span><span class="n">navigation</span><span class="o">/</span><span class="n">waypoint_get</span>
<span class="n">call</span> <span class="n">srv</span><span class="o">:</span> <span class="n">Null</span>
<span class="n">response</span> <span class="n">srv</span><span class="o">:</span> 
    <span class="o">:</span><span class="kt">bool</span> <span class="n">success</span>
    <span class="o">:</span><span class="n">uint32</span> <span class="n">wp_received</span>
    <span class="o">:</span><span class="n">mavros_msgs</span><span class="o">/</span><span class="n">Waypoint</span><span class="p">[]</span> <span class="n">waypoints</span>
</code></pre><pre class="highlight python tab-python--ros"><code><span class="c"># ROS services and topics are accessible from onboard scripts only.</span>

<span class="n">Type</span><span class="p">:</span> <span class="n">Ros</span> <span class="n">Service</span>
<span class="n">Name</span><span class="p">:</span> <span class="o">/&lt;</span><span class="n">namespace</span><span class="o">&gt;/</span><span class="n">navigation</span><span class="o">/</span><span class="n">waypoint_get</span>
<span class="n">call</span> <span class="n">srv</span><span class="p">:</span> <span class="n">Null</span>
<span class="n">response</span> <span class="n">srv</span><span class="p">:</span> 
    <span class="p">:</span><span class="nb">bool</span> <span class="n">success</span>
    <span class="p">:</span><span class="n">uint32</span> <span class="n">wp_received</span>
    <span class="p">:</span><span class="n">mavros_msgs</span><span class="o">/</span><span class="n">Waypoint</span><span class="p">[]</span> <span class="n">waypoints</span>
</code></pre><pre class="highlight javascript tab-javascript--REST"><code><span class="nx">This</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">REST</span> <span class="nx">call</span> <span class="k">for</span> <span class="nx">the</span> <span class="nx">API</span><span class="p">.</span> <span class="nx">Make</span> <span class="nx">sure</span> <span class="nx">to</span> <span class="nx">replace</span> 
    <span class="nx">ip</span><span class="p">:</span> <span class="nx">ip</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">FlytOS</span> <span class="nx">running</span> <span class="nx">device</span>
    <span class="nl">namespace</span><span class="p">:</span> <span class="nx">namespace</span> <span class="nx">used</span> <span class="nx">by</span> <span class="nx">the</span> <span class="nx">FlytOS</span> <span class="nx">device</span><span class="p">.</span>

<span class="nl">URL</span><span class="p">:</span> <span class="s1">'http://&lt;ip&gt;/ros/&lt;namespace&gt;/navigation/waypoint_get'</span>

<span class="nx">JSON</span> <span class="nx">Response</span><span class="p">:</span>
<span class="p">{</span>   <span class="nl">success</span><span class="p">:</span> <span class="nb">Boolean</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> 
    <span class="nx">wp_recieved</span><span class="p">:</span> <span class="nx">Int</span><span class="p">,</span>
    <span class="nx">waypoints</span><span class="p">:</span> <span class="p">[{</span>
        <span class="na">frame</span><span class="p">:</span> <span class="nx">Int</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span>
        <span class="na">command</span><span class="p">:</span><span class="nx">Int</span> <span class="mi">16</span><span class="o">/</span><span class="mi">17</span><span class="o">/</span><span class="mi">18</span><span class="o">/</span><span class="mi">19</span><span class="o">/</span><span class="mi">20</span><span class="o">/</span><span class="mi">21</span><span class="o">/</span><span class="mi">22</span><span class="p">,</span>
        <span class="na">is_current</span><span class="p">:</span> <span class="nb">Boolean</span><span class="p">,</span>
        <span class="na">autocontinue</span><span class="p">:</span> <span class="nb">Boolean</span><span class="p">,</span>
        <span class="na">param1</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
        <span class="na">param2</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
        <span class="na">param3</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
        <span class="na">param4</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
        <span class="na">x_lat</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
        <span class="na">y_long</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
        <span class="na">z_alt</span><span class="p">:</span> <span class="nx">Float</span><span class="p">},{},{}...</span>
    <span class="p">]</span>
<span class="p">}</span>

</code></pre><pre class="highlight javascript tab-javascript--Websocket"><code><span class="nx">This</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">Websocket</span> <span class="nx">call</span> <span class="k">for</span> <span class="nx">the</span> <span class="nx">API</span><span class="p">.</span> <span class="nx">Make</span> <span class="nx">sure</span> <span class="nx">you</span> 
<span class="nx">initialise</span> <span class="nx">the</span> <span class="nx">websocket</span> <span class="nx">using</span> <span class="nx">websocket</span> <span class="nx">initialising</span> 
<span class="nx">API</span> <span class="nx">and</span> <span class="nx">replace</span> <span class="nx">namespace</span> <span class="kd">with</span> <span class="nx">the</span> <span class="nx">namespace</span> <span class="nx">of</span> 
<span class="nx">the</span> <span class="nx">FlytOS</span> <span class="nx">running</span> <span class="nx">device</span> <span class="nx">before</span> <span class="nx">calling</span> <span class="nx">the</span> <span class="nx">API</span> 
<span class="kd">with</span> <span class="nx">websocket</span><span class="p">.</span>

<span class="nl">name</span><span class="p">:</span> <span class="s1">'/&lt;namespace&gt;/navigation/waypoint_get'</span><span class="p">,</span>
<span class="nx">serviceType</span><span class="p">:</span> <span class="s1">'core_api/WaypointGet'</span>

<span class="nl">Response</span><span class="p">:</span>
<span class="p">{</span>   <span class="nl">success</span><span class="p">:</span> <span class="nb">Boolean</span><span class="p">,</span>
    <span class="nx">message</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> 
    <span class="nx">wp_recieved</span><span class="p">:</span> <span class="nx">Int</span><span class="p">,</span>
    <span class="nx">waypoints</span><span class="p">:</span> <span class="p">[{</span>
        <span class="na">frame</span><span class="p">:</span> <span class="nx">Int</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span>
        <span class="na">command</span><span class="p">:</span><span class="nx">Int</span> <span class="mi">16</span><span class="o">/</span><span class="mi">17</span><span class="o">/</span><span class="mi">18</span><span class="o">/</span><span class="mi">19</span><span class="o">/</span><span class="mi">20</span><span class="o">/</span><span class="mi">21</span><span class="o">/</span><span class="mi">22</span><span class="p">,</span>
        <span class="na">is_current</span><span class="p">:</span> <span class="nb">Boolean</span><span class="p">,</span>
        <span class="na">autocontinue</span><span class="p">:</span> <span class="nb">Boolean</span><span class="p">,</span>
        <span class="na">param1</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
        <span class="na">param2</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
        <span class="na">param3</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
        <span class="na">param4</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
        <span class="na">x_lat</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
        <span class="na">y_long</span><span class="p">:</span> <span class="nx">Float</span><span class="p">,</span>
        <span class="na">z_alt</span><span class="p">:</span> <span class="nx">Float</span><span class="p">},{},{}...</span>
    <span class="p">]</span>
<span class="p">}</span>


</code></pre>
<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>rosservice call /flytos/navigation/waypoint_get <span class="s2">"{}"</span> 
</code></pre><pre class="highlight cpp tab-cpp"><code><span class="cp">#include &lt;cpp_api/navigation_bridge.h&gt;
</span>
<span class="n">Navigation</span> <span class="n">nav</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">mavros_msgs</span><span class="o">::</span><span class="n">Waypoint</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">waypoints</span>
<span class="n">nav</span><span class="p">.</span><span class="n">waypoint_get</span><span class="p">(</span><span class="n">waypoints</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">"Number of waypoints received</span><span class="se">\t</span><span class="s">"</span><span class="o">&lt;&lt;</span><span class="n">waypoints</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="c"># create flyt_python navigation class instance</span>
<span class="kn">from</span> <span class="nn">flyt_python</span> <span class="kn">import</span> <span class="n">API</span>
<span class="n">drone</span> <span class="o">=</span> <span class="n">API</span><span class="o">.</span><span class="n">navigation</span><span class="p">()</span>
<span class="c"># wait for interface to initialize</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span>

<span class="c"># get list of current waypoints  </span>
<span class="n">wp</span> <span class="o">=</span> <span class="n">drone</span><span class="o">.</span><span class="n">waypoint_get</span><span class="p">()</span>

</code></pre><pre class="highlight cpp tab-cpp--ros"><code><span class="c1">// Please refer to Roscpp documentation for sample service clients. http://wiki.ros.org/ROS/Tutorials/WritingServiceClient(c%2B%2B)
</span></code></pre><pre class="highlight python tab-python--ros"><code>
<span class="c"># Please refer to Rospy documentation for sample service clients. http://wiki.ros.org/ROS/Tutorials/WritingServiceClient(python)</span>

</code></pre><pre class="highlight javascript tab-javascript--REST"><code>
<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="s2">"GET"</span><span class="p">,</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s2">"json"</span><span class="p">,</span>
    <span class="na">url</span><span class="p">:</span> <span class="s2">"http://&lt;ip&gt;/ros/&lt;namespace&gt;/navigation/waypoint_get"</span><span class="p">,</span>  
    <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
           <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">waypoints</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

</code></pre><pre class="highlight javascript tab-javascript--Websocket"><code><span class="kd">var</span> <span class="nx">waypointGet</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ROSLIB</span><span class="p">.</span><span class="nx">Service</span><span class="p">({</span>
    <span class="na">ros</span> <span class="p">:</span> <span class="nx">ros</span><span class="p">,</span>
    <span class="na">name</span> <span class="p">:</span> <span class="s1">'/&lt;namespace&gt;/navigation/waypoint_get'</span><span class="p">,</span>
    <span class="na">serviceType</span> <span class="p">:</span> <span class="s1">'core_api/WaypointGet'</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ROSLIB</span><span class="p">.</span><span class="nx">ServiceRequest</span><span class="p">({});</span>

<span class="nx">waypointGet</span><span class="p">.</span><span class="nx">callService</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Result for service call on '</span>
      <span class="o">+</span> <span class="nx">waypointGet</span><span class="p">.</span><span class="nx">name</span>
      <span class="o">+</span> <span class="s1">': '</span>
      <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">success</span>
      <span class="o">+</span><span class="s1">': '</span>
      <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>success: True
wp_received: 1
waypoints: 
  - 
    frame: 3
    <span class="nb">command</span>: 16
    is_current: True
    autocontinue: True
    param1: 0.0
    param2: 0.0
    param3: 0.0
    param4: 0.0
    x_lat: 18.6204299927
    y_long: 73.903465271
    z_alt: 50.0
</code></pre><pre class="highlight cpp tab-cpp"><code><span class="mi">0</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'wp_received'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'message'</span><span class="p">:</span> <span class="s">'[INFO] Waypoint get Successful'</span><span class="p">,</span> <span class="s">'success'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s">'waypoints'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'autocontinue'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s">'frame'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">'command'</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="s">'param4'</span><span class="p">:</span> <span class="mf">10.199999809265137</span><span class="p">,</span> <span class="s">'is_current'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s">'param2'</span><span class="p">:</span> <span class="mf">10.199999809265137</span><span class="p">,</span> <span class="s">'param1'</span><span class="p">:</span> <span class="mf">10.199999809265137</span><span class="p">,</span> <span class="s">'y_long'</span><span class="p">:</span> <span class="o">-</span><span class="mf">122.08358764648438</span><span class="p">,</span> <span class="s">'param3'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s">'x_lat'</span><span class="p">:</span> <span class="mf">7.429123401641846</span><span class="p">,</span> <span class="s">'z_alt'</span><span class="p">:</span> <span class="mf">112.61199951171875</span><span class="p">},</span> <span class="p">{</span><span class="s">'autocontinue'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s">'frame'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">'command'</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="s">'param4'</span><span class="p">:</span> <span class="mf">10.199999809265137</span><span class="p">,</span> <span class="s">'is_current'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="s">'param2'</span><span class="p">:</span> <span class="mf">10.199999809265137</span><span class="p">,</span> <span class="s">'param1'</span><span class="p">:</span> <span class="mf">10.199999809265137</span><span class="p">,</span> <span class="s">'y_long'</span><span class="p">:</span> <span class="o">-</span><span class="mf">122.08329010009766</span><span class="p">,</span> <span class="s">'param3'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s">'x_lat'</span><span class="p">:</span> <span class="mf">7.4294233322143555</span><span class="p">,</span> <span class="s">'z_alt'</span><span class="p">:</span> <span class="mf">112.61199951171875</span><span class="p">}]}</span>


<span class="n">wp_received</span> <span class="p">(</span><span class="nb">int</span><span class="p">):</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">waypoints</span> <span class="n">received</span>
<span class="n">message</span> <span class="p">(</span><span class="n">string</span><span class="p">):</span> <span class="n">Contains</span> <span class="n">error</span> <span class="n">message</span>
<span class="n">success</span> <span class="p">(</span><span class="nb">bool</span><span class="p">):</span> <span class="n">true</span> <span class="k">if</span> <span class="n">action</span> <span class="n">successful</span>
<span class="n">waypoints</span> <span class="p">(</span><span class="nb">list</span><span class="p">):</span> <span class="n">consists</span> <span class="n">a</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">the</span> <span class="n">dictionary</span> <span class="n">consists</span> <span class="n">of</span> <span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">is_current</span><span class="p">,</span> <span class="n">autocontinue</span><span class="p">,</span> <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">,</span> <span class="n">param3</span><span class="p">,</span> <span class="n">param4</span><span class="p">,</span> <span class="n">x_lat</span><span class="p">,</span> <span class="n">y_long</span><span class="p">,</span> <span class="n">z_alt</span><span class="p">)</span>
</code></pre><pre class="highlight cpp tab-cpp--ros"><code></code></pre><pre class="highlight python tab-python--ros"><code></code></pre><pre class="highlight javascript tab-javascript--REST"><code><span class="p">{</span>
    <span class="nl">success</span><span class="p">:</span> <span class="nx">True</span><span class="p">,</span> 
    <span class="nx">wp_recieved</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nx">waypoints</span><span class="p">:</span> <span class="p">[{</span>
        <span class="na">frame</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="na">command</span><span class="p">:</span><span class="nx">Int</span> <span class="mi">16</span><span class="p">,</span>
        <span class="na">is_current</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">autocontinue</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">param1</span><span class="p">:</span> <span class="mf">6.0</span><span class="p">,</span>
        <span class="na">param2</span><span class="p">:</span> <span class="mf">7.0</span><span class="p">,</span>
        <span class="na">param3</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="na">param4</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="na">x_lat</span><span class="p">:</span> <span class="mf">65.425532</span><span class="p">,</span>
        <span class="na">y_long</span><span class="p">:</span> <span class="mf">18.542422</span><span class="p">,</span>
        <span class="na">z_alt</span><span class="p">:</span> <span class="mi">25</span><span class="p">},{}]</span>
<span class="p">}</span>

</code></pre><pre class="highlight javascript tab-javascript--Websocket"><code><span class="p">{</span>
    <span class="nl">success</span><span class="p">:</span> <span class="nx">True</span><span class="p">,</span> 
    <span class="nx">wp_recieved</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nx">waypoints</span><span class="p">:</span> <span class="p">[{</span>
        <span class="na">frame</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="na">command</span><span class="p">:</span><span class="nx">Int</span> <span class="mi">16</span><span class="p">,</span>
        <span class="na">is_current</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">autocontinue</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">param1</span><span class="p">:</span> <span class="mf">6.0</span><span class="p">,</span>
        <span class="na">param2</span><span class="p">:</span> <span class="mf">7.0</span><span class="p">,</span>
        <span class="na">param3</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="na">param4</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="na">x_lat</span><span class="p">:</span> <span class="mf">65.425532</span><span class="p">,</span>
        <span class="na">y_long</span><span class="p">:</span> <span class="mf">18.542422</span><span class="p">,</span>
        <span class="na">z_alt</span><span class="p">:</span> <span class="mi">25</span><span class="p">},{}]</span>
<span class="p">}</span>

</code></pre>
<h3 id="description">Description:</h3>

<p>This API returns list of current waypoints on autopilot.</p>

<h3 id="parameters">Parameters:</h3>

<p>Following parameters are applicable RESTful, Websocket, ROS. However the description of these parameters applies to all platforms. </p>

<p>Arguments: None</p>

<p>Output:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>bool</td>
<td>true if action successful</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>debug message</td>
</tr>
<tr>
<td>frame</td>
<td>int</td>
<td>The Frame in which the waypoints are given<br>0: Global<br>1: Local NED<br>2: Mission<br>3: Global Rel Alt</td>
</tr>
<tr>
<td>yaw</td>
<td>float</td>
<td>Yaw Setpoint in radians</td>
</tr>
<tr>
<td>yaw_valid</td>
<td>bool</td>
<td>Must be set to true, if yaw</td>
</tr>
<tr>
<td>tolerance</td>
<td>float</td>
<td>Acceptance radius in meters, default value=1.0m</td>
</tr>
<tr>
<td>relative</td>
<td>bool</td>
<td>If true, position setpoints relative to current position is sent</td>
</tr>
<tr>
<td>async</td>
<td>bool</td>
<td>If true, asynchronous mode is set</td>
</tr>
<tr>
<td>body_frame</td>
<td>bool</td>
<td>If true, position setpoints are relative with respect to body frame</td>
</tr>
</tbody></table>

<aside class="notice">
    See actual response body on the right.
</aside>

<h3 id="ros-endpoint">ROS endpoint:</h3>

<p>Navigation APIs in FlytOS are derived from / wrapped around the core navigation services in ROS. Onboard service clients in rospy / roscpp can call these APIs. Take a look at roscpp and rospy API definition for message structure. </p>

<ul>
<li>Type: <code class="prettyprint">Ros Service</code></li>
<li>Name: <code class="prettyprint">/&lt;namespace&gt;/navigation/waypoint_get</code></li>
<li>Service Type: <code class="prettyprint">core_api/WaypointGet</code></li>
</ul>

<h3 id="restful-endpoint">RESTful endpoint:</h3>

<p>FlytOS hosts a RESTful server which listens on port <strong>80</strong>. RESTful APIs can be called from remote platform of your choice.</p>

<ul>
<li>URL: <code class="prettyprint">GET http://&lt;ip&gt;/ros/&lt;namespace&gt;/navigation/waypoint_get</code></li>
<li>JSON Response:
<code class="prettyprint">{
success: Boolean,
message: String, 
wp_recieved: Int,
waypoints: [{
    frame: Int 0/1/2/3/4,
    command:Int 16/17/18/19/20/21/22,
    is_current: Boolean,
    autocontinue: Boolean,
    param1: Float,
    param2: Float,
    param3: Float,
    param4: Float,
    x_lat: Float,
    y_long: Float,
    z_alt: Float},{},{}...] }
}</code></li>
</ul>

<h3 id="websocket-endpoint">Websocket endpoint:</h3>

<p>Websocket APIs can be called from javascript using  <a href="https://github.com/RobotWebTools/roslibjs">roslibjs library.</a> </p>

<p>Java websocket clients are supported using <a href="http://wiki.ros.org/rosjava">rosjava.</a></p>

<ul>
<li>name: <code class="prettyprint">/&lt;namespace&gt;/navigation/waypoint_get</code></li>
<li>serviceType: <code class="prettyprint">core_api/WaypointGet</code></li>
</ul>
