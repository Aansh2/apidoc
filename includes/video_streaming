<h1 id="video-streaming-api">Video Streaming API</h1>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>
</code></pre><pre class="highlight cpp tab-cpp"><code>
</code></pre><pre class="highlight python tab-python"><code><span class="c"># Python API described below can be used in onboard scripts only. For remote scripts you can use http client libraries to call FlytOS REST endpoints from Python.</span>

<span class="nb">NotImplemented</span>
</code></pre><pre class="highlight cpp tab-cpp--ros"><code>
</code></pre><pre class="highlight python tab-python--ros"><code>

</code></pre><pre class="highlight javascript tab-javascript--REST"><code><span class="nx">This</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">REST</span> <span class="nx">call</span> <span class="k">for</span> <span class="nx">the</span> <span class="nx">API</span><span class="p">.</span> <span class="nx">Make</span> <span class="nx">sure</span> <span class="nx">to</span> <span class="nx">replace</span> 
    <span class="nx">ip</span><span class="p">:</span> <span class="nx">ip</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">FlytOS</span> <span class="nx">running</span> <span class="nx">device</span>
    <span class="nl">namespace</span><span class="p">:</span> <span class="nx">namespace</span> <span class="nx">used</span> <span class="nx">by</span> <span class="nx">the</span> <span class="nx">FlytOS</span> <span class="nx">device</span><span class="p">.</span>

<span class="nl">URL</span><span class="p">:</span> <span class="s1">'http://&lt;ip&gt;/list_streams'</span>

<span class="nx">JSON</span> <span class="nx">Request</span><span class="p">:</span>
<span class="p">{</span>   <span class="nl">namespace</span><span class="p">:</span> <span class="nb">String</span><span class="p">}</span>

<span class="nx">JSON</span> <span class="nx">Response</span><span class="p">:</span>
<span class="p">{</span>   <span class="nl">stream1</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
    <span class="nx">stream2</span><span class="p">:</span> <span class="nb">String</span><span class="p">,....</span> <span class="p">}</span>

</code></pre><pre class="highlight javascript tab-javascript--Websocket"><code><span class="nx">NA</span>


</code></pre>
<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>Not Implemented
</code></pre><pre class="highlight cpp tab-cpp"><code><span class="n">Not</span> <span class="n">Implemented</span>
</code></pre><pre class="highlight python tab-python"><code><span class="nb">NotImplemented</span>

</code></pre><pre class="highlight cpp tab-cpp--ros"><code><span class="n">Not</span> <span class="n">Implemented</span>
</code></pre><pre class="highlight python tab-python--ros"><code><span class="n">Not</span> <span class="n">Implemented</span>
</code></pre><pre class="highlight javascript tab-javascript--REST"><code><span class="kd">var</span> <span class="nx">msgdata</span><span class="o">=</span><span class="p">[];</span>
<span class="nx">msgdata</span><span class="p">[</span><span class="s1">'namespace'</span><span class="p">]</span><span class="o">=</span><span class="s1">'flytpod'</span><span class="p">;</span>
<span class="c1">// Use getnamespace API to know the namespace</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s2">"json"</span><span class="p">,</span>
    <span class="na">url</span><span class="p">:</span> <span class="s2">"http://&lt;ip&gt;/list_streams"</span><span class="p">,</span>  
    <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
           <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">'stream1'</span><span class="p">]</span><span class="o">+</span><span class="s2">" "</span><span class="o">+</span><span class="nx">data</span><span class="p">[</span><span class="s1">'stream2'</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">};</span>

</code></pre><pre class="highlight javascript tab-javascript--Websocket"><code><span class="nx">NA</span>
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>Not Implemented
</code></pre><pre class="highlight cpp tab-cpp"><code><span class="n">Not</span> <span class="n">Implemented</span>
</code></pre><pre class="highlight python tab-python"><code><span class="nb">NotImplemented</span>
</code></pre><pre class="highlight cpp tab-cpp--ros"><code><span class="n">Not</span> <span class="n">Implemented</span>
</code></pre><pre class="highlight python tab-python--ros"><code><span class="n">Not</span> <span class="n">Implemented</span>
</code></pre><pre class="highlight javascript tab-javascript--REST"><code><span class="p">{</span>
    <span class="nl">stream1</span><span class="p">:</span> <span class="o">&lt;</span><span class="nx">link</span> <span class="nx">to</span> <span class="nx">stream1</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">stream2</span><span class="p">:</span> <span class="o">&lt;</span><span class="nx">link</span> <span class="nx">to</span> <span class="nx">stream2</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">stream3</span><span class="p">:</span> <span class="o">&lt;</span><span class="nx">link</span> <span class="nx">to</span> <span class="nx">stream3</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">stream4</span><span class="p">:</span> <span class="o">&lt;</span><span class="nx">link</span> <span class="nx">to</span> <span class="nx">stream4</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">stream5</span><span class="p">:</span> <span class="o">&lt;</span><span class="nx">link</span> <span class="nx">to</span> <span class="nx">stream5</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="p">.</span>
    <span class="p">.</span>
    <span class="p">.</span>    
<span class="p">}</span>

</code></pre><pre class="highlight javascript tab-javascript--Websocket"><code><span class="nx">NA</span>
</code></pre>
<h3 id="description">Description:</h3>

<p>This API allows to get the list of video streams avalibale and view the live stream.</p>

<h3 id="parameters">Parameters:</h3>

<p>Following parameters are applicable in RESTful, Websocket. However the description of these parameters applies to all platforms. </p>

<p>Arguments:</p>

<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>namespace</td>
<td>string</td>
<td>namespace used in FlytOS</td>
</tr>
</tbody></table>

<p>Output:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>stream1</td>
<td>string</td>
<td>link of the video stream1</td>
</tr>
<tr>
<td>stream2</td>
<td>string</td>
<td>link of the video stream2</td>
</tr>
<tr>
<td>stream3</td>
<td>string</td>
<td>link of the video stream3</td>
</tr>
</tbody></table>

<p>.
    .
    .</p>

<h3 id="restful-endpoint">RESTful endpoint:</h3>

<p>FlytOS hosts a RESTful server which listens on port 80. RESTful APIs can be called from remote platform of your choice.</p>

<ul>
<li>URL: <code class="prettyprint">POST http://&lt;ip&gt;/list_streams</code></li>
<li><p>JSON Request:
{   namespace: &lt;namespace of FlytOS&gt;}</p></li>
<li><p>JSON Response:
{
stream1: &lt;link to stream1&gt;,
stream2: &lt;link to stream2&gt;,
stream3: &lt;link to stream3&gt;,
stream4: &lt;link to stream4&gt;,
stream5: &lt;link to stream5&gt;,
.
.
.<br>
}</p></li>
</ul>

<h3 id="api-usage-information">API usage information:</h3>

<p>Note: To view the video of a particular stream from the list of streams you need to create an <strong>img</strong> tag add the link to its source.</p>

<p><code class="prettyprint">&lt;img src=&#39;http://&lt;ip&gt;/stream?topic=&lt;link to stream1&gt;&#39; &gt;</code></p>

<p>Tip: You can add the following parameters as query string to the link for lighter or better resolution video quality.
width, height, quality, rate:1/2/3</p>

<p>rate:1 will send out every frame, 2 will send out every second frame, 3 every third and so on..</p>

<p>Tip: To stop the video stream you need to delete the <strong>img</strong> tag completely.</p>

<p>Tip: To take a snapshot of the stream replace the word stream with snapshot in the link.</p>

<p><code class="prettyprint">&lt;img src=&#39;http://&lt;ip&gt;/snapshot?topic=&lt;link to stream1&gt;&#39; &gt;</code></p>

<p>Note: <strong>Keep an eye out, for this API needs a port at the end of the IP set to :8080.</strong></p>
